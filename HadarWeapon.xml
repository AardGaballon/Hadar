   <?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Tuesday, September 20, 2016, 2:53 PM -->
<!-- MuClient version 5.01 -->

<muclient>
<plugin
   name="Hadar_WeaponChange"
   author="Hadar"
   id="37ed1e0475a216f87fcf6cd3"
   language="Lua"
   purpose="wear appropriate level weapons"
   save_state="y"
   date_written="2016-11-26 14:51:44"
   requires="4.00"
   version="1.0"
   >
<description trim="y">
<![CDATA[
Not sure what to put here yet, give me a bit and ill make it
]]>
</description>

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Triggers  -->
<triggers>
  <trigger
   enabled="y"
   match="^You raise a level! You are now level \d+.$"
   regexp="y"
   send_to="12"
   script="NowLeveled"
   sequence="100"
  >
  </trigger>
</triggers>

<!--  Plugin help  -->

<aliases>
  <alias
   match="fireweapon"
   enabled="y"
   send_to="12"
   sequence="100"
   script="NowLeveled"
  >
  </alias>
</aliases>

<script>
<![CDATA[
require "HadarLuaCommon"

function OnPluginSaveState ()
	SetVariable ("HadarWeapon", serialize.save ("HadarWeapon"))
end -- function OnPluginSaveState

function OnPluginInstall ()
	HadarWeapon={}
	assert (loadstring (GetVariable ("HadarWeapon") or "")) ()
	print("Hadar is running out of funny rule the world messages for startup :'( ")
end

function NowLeveled(Lvl)

	local _,Lvl = CallPlugin("3e7dedbe37e44942dd46d264","gmcpval","char.status.level")
	
	print("lvl "..Lvl)
	
	local weapontier=10
	local MainWeap = {[20]=139631862,[40]=3849687,[60]=3849680,[80]=226553287,[100]=3849755,[120]=905754234,[140]=585841156,[160]=921460715,[180]=918022904,[200]=819412001,[211]=344664045,[221]=969276372,[231]=945496996,[241]=974789760,[251]=1113285894}
	local DuelWeap = {[20]=139632061,[40]=1030059,[60]=151198753,[80]=6295973,[100]=3849756,[120]=649953722,[140]=585841164,[160]=917381678,[180]=896861917,[200]=651259510,[211]=905327225,[221]=969276380,[231]=952489617,[241]=935209889,[251]=1216657464}
	
	--if ismember(Lvl,weapontier) then
		--remove HadarWeapon.LMain
		--remove HadarWeapon.LDuel
		--put HadarWeapon.LMain weaponbag
		--put HadarWeapon.LDuel weaponbag
		--HadarWeapon.CMain = MainWeap.tonumber(Lvl)+tonumber(tier..0)
		--print(MainWeap.tonumber(Lvl)+tonumber(tier..0))
		--HadarWeapon.CDuel = DuelWeap.tonumber(Lvl)+tonumber(tier..0)
		--get HadarWeapon.CMain weaponbag
		--get HadarWeapon.CDuel weaponbag
		--wield HadarWeapon.CMain
		--dual HadarWeapon.CDuel
	--end -- no more if function :(
	
end


]]>
</script> 

</muclient>
